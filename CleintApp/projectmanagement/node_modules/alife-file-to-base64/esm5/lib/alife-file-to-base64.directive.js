/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, EventEmitter, ElementRef, Input, Output } from '@angular/core';
var AlifeFileToBase64Directive = /** @class */ (function () {
    function AlifeFileToBase64Directive(elementRef) {
        this.elementRef = elementRef;
        this.onFileChanged = new EventEmitter();
        this.fileModelChange = new EventEmitter();
        this.rawFileModelChange = new EventEmitter();
        this.isTypeFile = false;
        this.userCapture = false;
        this.globalFilesData = [];
        this.globalRawFilesData = [];
    }
    /**
     * @return {?}
     */
    AlifeFileToBase64Directive.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.isTypeFile = this.type === 'file';
        this.init();
    };
    /**
     * Initialize the action
     */
    /**
     * Initialize the action
     * @return {?}
     */
    AlifeFileToBase64Directive.prototype.init = /**
     * Initialize the action
     * @return {?}
     */
    function () {
        if (!this.isTypeFile) {
            console.error("alife-file-to-base64 will work only when input type is file.");
            this.removeFileChangeAction();
            return;
        }
        // // Check for the various File API support.
        // if (window.File && window.FileReader && window.FileList && window.Blob) {
        //   // Great success! All the File APIs are supported.
        // } else {
        //   alert('The File APIs are not fully supported in this browser.');
        // }
        this.bindFileChangeAction();
    };
    /**
     * Fire the events
     */
    /**
     * Fire the events
     * @return {?}
     */
    AlifeFileToBase64Directive.prototype.onFileReadingCompleted = /**
     * Fire the events
     * @return {?}
     */
    function () {
        this.fileModelChange.next(this.globalFilesData);
        this.rawFileModelChange.next(this.globalRawFilesData);
        this.onFileChanged.next(this.globalFilesData);
    };
    /**
     *
     * Read the files and prepare the output json with base64.
     *
     * @param event
     */
    /**
     *
     * Read the files and prepare the output json with base64.
     *
     * @param {?} event
     * @return {?}
     */
    AlifeFileToBase64Directive.prototype.handleFileSelection = /**
     *
     * Read the files and prepare the output json with base64.
     *
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (!this.isTypeFile) {
            return;
        }
        /** @type {?} */
        var files = event.target.files;
        this.globalRawFilesData = files;
        /** @type {?} */
        var fileOutput = [];
        for (var i = 0; i < files.length; i++) {
            /** @type {?} */
            var file = files[i];
            /** @type {?} */
            var opt = {
                name: file.name,
                size: file.size,
                type: file.type
            };
            fileOutput.push(opt);
        }
        /** @type {?} */
        var that = this;
        /**
         * @return {?}
         */
        function fileReadingCompleted() {
            that.globalFilesData = fileOutput;
            that.onFileReadingCompleted();
        }
        /** @type {?} */
        var reader = new FileReader();
        /**
         * @param {?} index
         * @return {?}
         */
        function readFile(index) {
            reader.onload = (function (fileData) {
                /** @type {?} */
                var base64 = fileData.target.result;
                fileOutput[index].base64 = base64;
                readFile(index + 1);
            });
            if (index >= files.length) {
                fileReadingCompleted();
                return;
            }
            reader.readAsDataURL(files[index]);
        }
        readFile(0);
    };
    /**
     * Add Event listener action on input
     */
    /**
     * Add Event listener action on input
     * @return {?}
     */
    AlifeFileToBase64Directive.prototype.bindFileChangeAction = /**
     * Add Event listener action on input
     * @return {?}
     */
    function () {
        this.elementRef.nativeElement.addEventListener('change', this.handleFileSelection.bind(this), this.userCapture);
    };
    /**
     * Remove Event listener action on input
     */
    /**
     * Remove Event listener action on input
     * @return {?}
     */
    AlifeFileToBase64Directive.prototype.removeFileChangeAction = /**
     * Remove Event listener action on input
     * @return {?}
     */
    function () {
        this.elementRef.nativeElement.addEventListener('change', this.handleFileSelection.bind(this), this.userCapture);
    };
    AlifeFileToBase64Directive.decorators = [
        { type: Directive, args: [{
                    selector: '[alife-file-to-base64]'
                },] }
    ];
    /** @nocollapse */
    AlifeFileToBase64Directive.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    AlifeFileToBase64Directive.propDecorators = {
        type: [{ type: Input }],
        fileModel: [{ type: Input }],
        rawFileModel: [{ type: Input }],
        onFileChanged: [{ type: Output }],
        fileModelChange: [{ type: Output }],
        rawFileModelChange: [{ type: Output }]
    };
    return AlifeFileToBase64Directive;
}());
export { AlifeFileToBase64Directive };
if (false) {
    /** @type {?} */
    AlifeFileToBase64Directive.prototype.type;
    /** @type {?} */
    AlifeFileToBase64Directive.prototype.fileModel;
    /** @type {?} */
    AlifeFileToBase64Directive.prototype.rawFileModel;
    /** @type {?} */
    AlifeFileToBase64Directive.prototype.onFileChanged;
    /** @type {?} */
    AlifeFileToBase64Directive.prototype.fileModelChange;
    /** @type {?} */
    AlifeFileToBase64Directive.prototype.rawFileModelChange;
    /** @type {?} */
    AlifeFileToBase64Directive.prototype.isTypeFile;
    /** @type {?} */
    AlifeFileToBase64Directive.prototype.userCapture;
    /** @type {?} */
    AlifeFileToBase64Directive.prototype.globalFilesData;
    /** @type {?} */
    AlifeFileToBase64Directive.prototype.globalRawFilesData;
    /**
     * @type {?}
     * @private
     */
    AlifeFileToBase64Directive.prototype.elementRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWxpZmUtZmlsZS10by1iYXNlNjQuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vYWxpZmUtZmlsZS10by1iYXNlNjQvIiwic291cmNlcyI6WyJsaWIvYWxpZmUtZmlsZS10by1iYXNlNjQuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVuRjtJQW1CRSxvQ0FBb0IsVUFBc0I7UUFBdEIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQVZoQyxrQkFBYSxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBQzNELG9CQUFlLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7UUFDeEQsdUJBQWtCLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7UUFFckUsZUFBVSxHQUFZLEtBQUssQ0FBQztRQUM1QixnQkFBVyxHQUFZLEtBQUssQ0FBQztRQUU3QixvQkFBZSxHQUFRLEVBQUUsQ0FBQztRQUMxQix1QkFBa0IsR0FBUSxFQUFFLENBQUM7SUFFaUIsQ0FBQzs7OztJQUUvQyw2Q0FBUTs7O0lBQVI7UUFDRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFFRDs7T0FFRzs7Ozs7SUFDSCx5Q0FBSTs7OztJQUFKO1FBQ0UsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDcEIsT0FBTyxDQUFDLEtBQUssQ0FBQyw4REFBOEQsQ0FBQyxDQUFDO1lBQzlFLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1lBQzlCLE9BQU87U0FDUjtRQUNELDZDQUE2QztRQUM3Qyw0RUFBNEU7UUFDNUUsdURBQXVEO1FBQ3ZELFdBQVc7UUFDWCxxRUFBcUU7UUFDckUsSUFBSTtRQUNKLElB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cUNBQ04sTUFBTTs7SUE4R1QsaUNBQUM7Q0FBQSxBQXpIRCxJQXlIQztTQXRIWSwwQkFBMEI7OztJQUVyQywwQ0FBc0I7O0lBQ3RCLCtDQUF3Qjs7SUFDeEIsa0RBQTJCOztJQUUzQixtREFBcUU7O0lBQ3JFLHFEQUFrRTs7SUFDbEUsd0RBQXFFOztJQUVyRSxnREFBNEI7O0lBQzVCLGlEQUE2Qjs7SUFFN0IscURBQTBCOztJQUMxQix3REFBNkI7Ozs7O0lBRWpCLGdEQUE4QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgRXZlbnRFbWl0dGVyLCBFbGVtZW50UmVmLCBJbnB1dCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ1thbGlmZS1maWxlLXRvLWJhc2U2NF0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBBbGlmZUZpbGVUb0Jhc2U2NERpcmVjdGl2ZSB7XHJcblxyXG4gIEBJbnB1dCgpIHR5cGU6IHN0cmluZztcclxuICBASW5wdXQoKSBmaWxlTW9kZWw6IGFueTtcclxuICBASW5wdXQoKSByYXdGaWxlTW9kZWw6IGFueTtcclxuXHJcbiAgQE91dHB1dCgpIG9uRmlsZUNoYW5nZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIGZpbGVNb2RlbENoYW5nZTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgQE91dHB1dCgpIHJhd0ZpbGVNb2RlbENoYW5nZTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIGlzVHlwZUZpbGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICB1c2VyQ2FwdHVyZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBnbG9iYWxGaWxlc0RhdGE6IGFueSA9IFtdO1xyXG4gIGdsb2JhbFJhd0ZpbGVzRGF0YTogYW55ID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZikgeyB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5pc1R5cGVGaWxlID0gdGhpcy50eXBlID09PSAnZmlsZSc7XHJcbiAgICB0aGlzLmluaXQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemUgdGhlIGFjdGlvblxyXG4gICAqL1xyXG4gIGluaXQoKSB7XHJcbiAgICBpZiAoIXRoaXMuaXNUeXBlRmlsZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiYWxpZmUtZmlsZS10by1iYXNlNjQgd2lsbCB3b3JrIG9ubHkgd2hlbiBpbnB1dCB0eXBlIGlzIGZpbGUuXCIpO1xyXG4gICAgICB0aGlzLnJlbW92ZUZpbGVDaGFuZ2VBY3Rpb24oKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gLy8gQ2hlY2sgZm9yIHRoZSB2YXJpb3VzIEZpbGUgQVBJIHN1cHBvcnQuXHJcbiAgICAvLyBpZiAod2luZG93LkZpbGUgJiYgd2luZG93LkZpbGVSZWFkZXIgJiYgd2luZG93LkZpbGVMaXN0ICYmIHdpbmRvdy5CbG9iKSB7XHJcbiAgICAvLyAgIC8vIEdyZWF0IHN1Y2Nlc3MhIEFsbCB0aGUgRmlsZSBBUElzIGFyZSBzdXBwb3J0ZWQuXHJcbiAgICAvLyB9IGVsc2Uge1xyXG4gICAgLy8gICBhbGVydCgnVGhlIEZpbGUgQVBJcyBhcmUgbm90IGZ1bGx5IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXIuJyk7XHJcbiAgICAvLyB9XHJcbiAgICB0aGlzLmJpbmRGaWxlQ2hhbmdlQWN0aW9uKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGaXJlIHRoZSBldmVudHNcclxuICAgKi9cclxuICBvbkZpbGVSZWFkaW5nQ29tcGxldGVkKCkge1xyXG4gICAgdGhpcy5maWxlTW9kZWxDaGFuZ2UubmV4dCh0aGlzLmdsb2JhbEZpbGVzRGF0YSk7XHJcbiAgICB0aGlzLnJhd0ZpbGVNb2RlbENoYW5nZS5uZXh0KHRoaXMuZ2xvYmFsUmF3RmlsZXNEYXRhKTtcclxuICAgIHRoaXMub25GaWxlQ2hhbmdlZC5uZXh0KHRoaXMuZ2xvYmFsRmlsZXNEYXRhKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFxyXG4gICAqIFJlYWQgdGhlIGZpbGVzIGFuZCBwcmVwYXJlIHRoZSBvdXRwdXQganNvbiB3aXRoIGJhc2U2NC5cclxuICAgKiBcclxuICAgKiBAcGFyYW0gZXZlbnRcclxuICAgKi9cclxuICBoYW5kbGVGaWxlU2VsZWN0aW9uKGV2ZW50KSB7XHJcblxyXG4gICAgaWYgKCF0aGlzLmlzVHlwZUZpbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBmaWxlcyA9IGV2ZW50LnRhcmdldC5maWxlcztcclxuICAgIHRoaXMuZ2xvYmFsUmF3RmlsZXNEYXRhID0gZmlsZXM7XHJcblxyXG4gICAgbGV0IGZpbGVPdXRwdXQgPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGxldCBmaWxlID0gZmlsZXNbaV07XHJcbiAgICAgIGxldCBvcHQgPSB7XHJcbiAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcclxuICAgICAgICB0eXBlOiBmaWxlLnR5cGVcclxuICAgICAgfVxyXG4gICAgICBmaWxlT3V0cHV0LnB1c2gob3B0KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgZnVuY3Rpb24gZmlsZVJlYWRpbmdDb21wbGV0ZWQoKSB7XHJcbiAgICAgIHRoYXQuZ2xvYmFsRmlsZXNEYXRhID0gZmlsZU91dHB1dDtcclxuICAgICAgdGhhdC5vbkZpbGVSZWFkaW5nQ29tcGxldGVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICBmdW5jdGlvbiByZWFkRmlsZShpbmRleCkge1xyXG5cclxuICAgICAgcmVhZGVyLm9ubG9hZCA9IChmdW5jdGlvbiAoZmlsZURhdGE6IGFueSkge1xyXG4gICAgICAgIGxldCBiYXNlNjQgPSBmaWxlRGF0YS50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgIGZpbGVPdXRwdXRbaW5kZXhdLmJhc2U2NCA9IGJhc2U2NDtcclxuICAgICAgICByZWFkRmlsZShpbmRleCArIDEpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChpbmRleCA+PSBmaWxlcy5sZW5ndGgpIHtcclxuICAgICAgICBmaWxlUmVhZGluZ0NvbXBsZXRlZCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlc1tpbmRleF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRGaWxlKDApO1xyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBFdmVudCBsaXN0ZW5lciBhY3Rpb24gb24gaW5wdXQgXHJcbiAgICovXHJcbiAgYmluZEZpbGVDaGFuZ2VBY3Rpb24oKSB7XHJcbiAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLmhhbmRsZUZpbGVTZWxlY3Rpb24uYmluZCh0aGlzKSwgdGhpcy51c2VyQ2FwdHVyZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgRXZlbnQgbGlzdGVuZXIgYWN0aW9uIG9uIGlucHV0IFxyXG4gICAqL1xyXG4gIHJlbW92ZUZpbGVDaGFuZ2VBY3Rpb24oKSB7XHJcbiAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLmhhbmRsZUZpbGVTZWxlY3Rpb24uYmluZCh0aGlzKSwgdGhpcy51c2VyQ2FwdHVyZSk7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=